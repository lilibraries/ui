import { Canvas, Meta, Story } from "@storybook/addon-docs";

<Meta title="Overlays/Modal" />

# Modal

Show modal on the document.

## Examples

### Basic Modal

<Canvas mdxSource={require("!!raw-loader!./BasicModal").default}>
  <Story id="examples-modal--basic-modal" />
</Canvas>

### Centered Modal

<Canvas mdxSource={require("!!raw-loader!./CenteredModal").default}>
  <Story id="examples-modal--centered-modal" />
</Canvas>

### Blurred Backdrop

<Canvas mdxSource={require("!!raw-loader!./BlurredBackdrop").default}>
  <Story id="examples-modal--blurred-backdrop" />
</Canvas>

### Delete Dialog

<Canvas mdxSource={require("!!raw-loader!./DeleteDialog").default}>
  <Story id="examples-modal--delete-dialog" />
</Canvas>

### Profile Card

<Canvas mdxSource={require("!!raw-loader!./ProfileCard").default}>
  <Story id="examples-modal--profile-card" />
</Canvas>

### Long Content

When the modal content exceeds the maximum height, a scrollbar will be displayed.

<Canvas mdxSource={require("!!raw-loader!./LongContent").default}>
  <Story id="examples-modal--long-content" />
</Canvas>

### Controlled Open

<Canvas mdxSource={require("!!raw-loader!./ControlledOpen").default}>
  <Story id="examples-modal--controlled-open" />
</Canvas>

### Trigger Delay

Open or close after 500ms.

<Canvas mdxSource={require("!!raw-loader!./TriggerDelay").default}>
  <Story id="examples-modal--trigger-delay" />
</Canvas>

### Nested Overlay

Modal can not only be nested within themselves, but also nested with other overlay components (such as Popup).

<Canvas mdxSource={require("!!raw-loader!./NestedOverlay").default}>
  <Story id="examples-modal--nested-overlay" />
</Canvas>

### Modal Sizes

The Modal component has three preset sizes: `"small"` (400px), `"medium"` (600px), `"large"` (800px). You can also customize the size.

<Canvas mdxSource={require("!!raw-loader!./ModalSizes").default}>
  <Story id="examples-modal--modal-sizes" />
</Canvas>

### Close Events

In the following example, you can close the modal by pressing the <kbd>ESC</kbd> key, hidding the page, losing focus on the window, or clicking the backdrop.

<Canvas mdxSource={require("!!raw-loader!./CloseEvents").default}>
  <Story id="examples-modal--close-events" />
</Canvas>

### Confirming

The `onConfirm` event handler can return a Promise object to show loading spinner of confirm button.

<Canvas mdxSource={require("!!raw-loader!./Confirming").default}>
  <Story id="examples-modal--confirming" />
</Canvas>

## API

| Property       | Type                                                                                        | Description                                                                                                                                                                                                                                                                                           |
| -------------- | ------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `children`     | `ReactElement`                                                                              | Trigger element for opening modal. It should accept the `onClick` prop.                                                                                                                                                                                                                               |
| `icon`         | `ReactNode`                                                                                 | Header icon.                                                                                                                                                                                                                                                                                          |
| `title`        | `ReactNode`                                                                                 | Header title.                                                                                                                                                                                                                                                                                         |
| `content`      | `ReactNode`                                                                                 | Modal content.                                                                                                                                                                                                                                                                                        |
| `headnote`     | `ReactNode`                                                                                 | Header end note.                                                                                                                                                                                                                                                                                      |
| `footnote`     | `ReactNode`                                                                                 | Footer start note.                                                                                                                                                                                                                                                                                    |
| `divided`      | `boolean`                                                                                   | Divided header and footer by border.                                                                                                                                                                                                                                                                  |
| `splited`      | `boolean`                                                                                   | Show background color of header and footer.                                                                                                                                                                                                                                                           |
| `unpadding`    | `boolean`                                                                                   | Remove content padding.                                                                                                                                                                                                                                                                               |
| `borderless`   | `boolean`                                                                                   | Remove borders. It defaults to `true` in the dark theme, otherwise it defaults to `false`.                                                                                                                                                                                                            |
| `size`         | `"small"` \| `"medium"` \| `"large"` \| `string` \| `number`                                | Preset size or custom width.                                                                                                                                                                                                                                                                          |
| `blurred`      | `boolean`                                                                                   | Show blurred backdrop.                                                                                                                                                                                                                                                                                |
| `centered`     | `boolean`                                                                                   | Display modal in the middle of the document.                                                                                                                                                                                                                                                          |
| `off`          | `"escape"` \| `"page-hide"` \| `"window-blur"` \| `"backdrop-click"` \| `string[]`          | Close event. Default is `"backdrop-click"`.                                                                                                                                                                                                                                                           |
| `open`         | `boolean`                                                                                   | Controlled open.                                                                                                                                                                                                                                                                                      |
| `defaultOpen`  | `boolean`                                                                                   | Uncontrolled open.                                                                                                                                                                                                                                                                                    |
| `closable`     | `boolean`                                                                                   | Show close button.                                                                                                                                                                                                                                                                                    |
| `closeProps`   | [`ButtonProps`](?path=/story/generics-button--page#api)                                     | Custom close button props.                                                                                                                                                                                                                                                                            |
| `cancelLabel`  | `ReactNode`                                                                                 | Cancel button label.                                                                                                                                                                                                                                                                                  |
| `cancelProps`  | [`ButtonProps`](?path=/story/generics-button--page#api)                                     | Custom cancel button props.                                                                                                                                                                                                                                                                           |
| `confirmLabel` | `ReactNode`                                                                                 | Confirm button label.                                                                                                                                                                                                                                                                                 |
| `confirmProps` | [`ButtonProps`](?path=/story/generics-button--page#api)                                     | Custom confirm button props.                                                                                                                                                                                                                                                                          |
| `container`    | [`EffectTarget<HTMLElement>`](https://lilibraries.github.io/utils/types#effecttarget-react) | The DOM node where the Modal should be rendered. It can be `null`, `undefined`, a DOM element, a function returns a DOM element or a ref object references a DOM element. Default is `document.body`. This prop can be configured by [`Portal.Config`](?path=/story/others-portal--page#portalconfig) |
| `openDelay`    | `number`                                                                                    | Open delay, in milliseconds.                                                                                                                                                                                                                                                                          |
| `closeDelay`   | `number`                                                                                    | Close delay, in milliseconds.                                                                                                                                                                                                                                                                         |
| `firstMount`   | `boolean`                                                                                   | Mount on first time, no matter whether the Modal is opened.                                                                                                                                                                                                                                           |
| `keepMounted`  | `boolean`                                                                                   | Keep mounted after the Modal is closed.                                                                                                                                                                                                                                                               |
| `onOpen`       | `() => void`                                                                                | Open event.                                                                                                                                                                                                                                                                                           |
| `onClose`      | `() => void`                                                                                | Close event.                                                                                                                                                                                                                                                                                          |
| `onOpened`     | `() => void`                                                                                | The Modal is completely opened, and the open animation is finished.                                                                                                                                                                                                                                   |
| `onClosed`     | `() => void`                                                                                | The Modal is completely closed, and the close animation is finished.                                                                                                                                                                                                                                  |
| `onCancel`     | <code>(event: MouseEvent<HTMLButtonElement\>) => void</code>                                | Cancel button click event.                                                                                                                                                                                                                                                                            |
| `onConfirm`    | <code>(event: MouseEvent<HTMLButtonElement\>) => Promise<any\> \| void</code>               | Confirm button click event.                                                                                                                                                                                                                                                                           |

It accepts all props which the native `<div>` element supports.
