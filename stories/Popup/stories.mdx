import { Meta, Canvas, Story } from "@storybook/addon-docs";

<Meta title="Overlays/Popup" />

# Popup

Popup is built on the [Popper](?path=/story/overlays-popper--page) component. It adds simple styles and animation effects.

## Examples

### Basic

<Canvas mdxSource={require("!!raw-loader!./Basic").default}>
  <Story id="examples-popup--basic" />
</Canvas>

### With Info

<Canvas mdxSource={require("!!raw-loader!./WithInfo").default}>
  <Story id="examples-popup--with-info" />
</Canvas>

### Hide Arrow

<Canvas mdxSource={require("!!raw-loader!./HideArrow").default}>
  <Story id="examples-popup--hide-arrow" />
</Canvas>

### Disable Animation

<Canvas mdxSource={require("!!raw-loader!./DisableAnimation").default}>
  <Story id="examples-popup--disable-animation" />
</Canvas>

### Trigger Events

<Canvas mdxSource={require("!!raw-loader!./TriggerEvents").default}>
  <Story id="examples-popup--trigger-events" />
</Canvas>

### Close Events

Default to close when document is clicked.

<Canvas mdxSource={require("!!raw-loader!./CloseEvents").default}>
  <Story id="examples-popup--close-events" />
</Canvas>

### Controlled

<Canvas mdxSource={require("!!raw-loader!./Controlled").default}>
  <Story id="examples-popup--controlled" />
</Canvas>

### Trigger Delay

<Canvas mdxSource={require("!!raw-loader!./TriggerDelay").default}>
  <Story id="examples-popup--trigger-delay" />
</Canvas>

### Hover Delay

<Canvas mdxSource={require("!!raw-loader!./HoverDelay").default}>
  <Story id="examples-popup--hover-delay" />
</Canvas>

### Placements

<Canvas mdxSource={require("!!raw-loader!./Placements").default}>
  <Story id="examples-popup--placements" />
</Canvas>

### Right Click

<Canvas mdxSource={require("!!raw-loader!./RightClick").default}>
  <Story id="examples-popup--right-click" />
</Canvas>

### Hover Move

<Canvas mdxSource={require("!!raw-loader!./HoverMove").default}>
  <Story id="examples-popup--hover-move" />
</Canvas>

### Inline

<Canvas mdxSource={require("!!raw-loader!./Inline").default}>
  <Story id="examples-popup--inline" />
</Canvas>

### Text Selection

<Canvas mdxSource={require("!!raw-loader!./TextSelection").default}>
  <Story id="examples-popup--text-selection" />
</Canvas>

### Nested

The Popup can be nested by default.

<Canvas mdxSource={require("!!raw-loader!./Nested").default}>
  <Story id="examples-popup--nested" />
</Canvas>

## API

| Property              | Type                                                                                                                                                                                       | Description                                                                                                                                                                                                                                                                     |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `children`            | `ReactElement` \| [`() => PopperVirtualElement`](?path=/story/overlays-popper--page#poppervirtualelement)                                                                                  | Trigger element, it should be a react element (must reference to a DOM element) or a function returns a virtual element                                                                                                                                                         |
| `content`             | `ReactNode`                                                                                                                                                                                | Popup content                                                                                                                                                                                                                                                                   |
| `padding`             | `boolean`                                                                                                                                                                                  | Add padding space, default is `true`                                                                                                                                                                                                                                            |
| `arrowed`             | `boolean`                                                                                                                                                                                  | Show arrow, default is `true`                                                                                                                                                                                                                                                   |
| `animated`            | `boolean`                                                                                                                                                                                  | Enable animation, default is `true`                                                                                                                                                                                                                                             |
| `on`                  | `"click"` \| `"hover"` \| `"focus"` \| `"contextmenu"` \| `string[]`                                                                                                                       | Trigger event, default is `"click"`                                                                                                                                                                                                                                             |
| `offset`              | `number` \| `[number, number]`                                                                                                                                                             | Offset distance between popup layer and trigger element. If a number is set, it will only effect the main axis. If an array is set, the first one effects main axis, and the second one effects cross axis. You can set this prop to override the default offsets.              |
| `strategy`            | `"absolute"` \| `"fixed"`                                                                                                                                                                  | Popup strategy, default is `"absolute"`                                                                                                                                                                                                                                         |
| `placement`           | `"top"` \| `"top-start"` \| `"top-end"` \| `"right"` \| `"right-start"` \| `"right-end"` \| `"bottom"` \| `"bottom-start"` \| `"bottom-end"` \| `"left"` \| `"left-start"` \| `"left-end"` | Popup placement, default is `"bottom"`                                                                                                                                                                                                                                          |
| `container`           | [`EffectTarget<HTMLElement>`](https://lilibraries.github.io/utils/types#effecttarget-react)                                                                                                | Parent node of popup layer. It can be `null`, `undefined`, a DOM element, a function returns a DOM element or a ref object refrences a DOM element. Default is `document.body`. This prop can be configured by [`Portal.Config`](?path=/story/others-portal--page#portalconfig) |
| `open`                | `boolean`                                                                                                                                                                                  | Show popup layer                                                                                                                                                                                                                                                                |
| `defaultOpen`         | `boolean`                                                                                                                                                                                  | Uncontrolled open                                                                                                                                                                                                                                                               |
| `openDelay`           | `number`                                                                                                                                                                                   | Delay time on open, in milliseconds                                                                                                                                                                                                                                             |
| `closeDelay`          | `number`                                                                                                                                                                                   | Delay time on close, in milliseconds                                                                                                                                                                                                                                            |
| `hoverEnterDelay`     | `number`                                                                                                                                                                                   | Delay time on hover enter, in milliseconds, default is `100`                                                                                                                                                                                                                    |
| `hoverLeaveDelay`     | `number`                                                                                                                                                                                   | Delay time on hover leave, in milliseconds, default is `100`                                                                                                                                                                                                                    |
| `updateDeps`          | `any[]`                                                                                                                                                                                    | A dependency array to auto update popup position                                                                                                                                                                                                                                |
| `followPoint`         | `boolean`                                                                                                                                                                                  | The popup layer will follow the mouse point                                                                                                                                                                                                                                     |
| `prepared`            | `boolean`                                                                                                                                                                                  | Mount on first time, no matter whether the component is opened                                                                                                                                                                                                                  |
| `keepAlive`           | `boolean`                                                                                                                                                                                  | Don't unmount popup content on close                                                                                                                                                                                                                                            |
| `closeOnEscape`       | `boolean`                                                                                                                                                                                  | Close when pressing the <kbd>ESC</kbd> key                                                                                                                                                                                                                                      |
| `closeOnPageHide`     | `boolean`                                                                                                                                                                                  | Close when the page is hidden                                                                                                                                                                                                                                                   |
| `closeOnWindowBlur`   | `boolean`                                                                                                                                                                                  | Close when the `window` loses focus                                                                                                                                                                                                                                             |
| `closeOnClickOutside` | `boolean`                                                                                                                                                                                  | Close when clicking outside the trigger and pupup layer, default is `true`                                                                                                                                                                                                      |
| `onOpen`              | `() => void`                                                                                                                                                                               | Event of the `open` state change to `true`                                                                                                                                                                                                                                      |
| `onClose`             | `() => void`                                                                                                                                                                               | Event of the `open` state change to `false`                                                                                                                                                                                                                                     |
| `onOpened`            | `() => void`                                                                                                                                                                               | Popup layer show event                                                                                                                                                                                                                                                          |
| `onClosed`            | `() => void`                                                                                                                                                                               | Popup layer hide event                                                                                                                                                                                                                                                          |
| `onUpdate`            | [`(data: PopperUpdateData) => void`](?path=/story/overlays-popper--page#popperupdatedata)                                                                                                  | Update event of popup layer position changing                                                                                                                                                                                                                                   |

It accepts all props which the native `<div>` element supports.
