import { Canvas, Meta, Story } from "@storybook/addon-docs";

<Meta title="Overlays/Popup" />

# Popup

Popup is built on the [Popper](?path=/story/overlays-popper--page) component. It adds simple styles and animation effects.

## Examples

### Basic

<Canvas mdxSource={require("!!raw-loader!./Basic").default}>
  <Story id="examples-popup--basic" />
</Canvas>

### Show Arrow

<Canvas mdxSource={require("!!raw-loader!./ShowArrow").default}>
  <Story id="examples-popup--show-arrow" />
</Canvas>

### With Description

<Canvas mdxSource={require("!!raw-loader!./WithDescription").default}>
  <Story id="examples-popup--with-description" />
</Canvas>

### Disable Animation

<Canvas mdxSource={require("!!raw-loader!./DisableAnimation").default}>
  <Story id="examples-popup--disable-animation" />
</Canvas>

### Trigger Events

<Canvas mdxSource={require("!!raw-loader!./TriggerEvents").default}>
  <Story id="examples-popup--trigger-events" />
</Canvas>

### Close Events

<Canvas mdxSource={require("!!raw-loader!./CloseEvents").default}>
  <Story id="examples-popup--close-events" />
</Canvas>

### Controlled Open

<Canvas mdxSource={require("!!raw-loader!./ControlledOpen").default}>
  <Story id="examples-popup--controlled-open" />
</Canvas>

### Trigger Delay

<Canvas mdxSource={require("!!raw-loader!./TriggerDelay").default}>
  <Story id="examples-popup--trigger-delay" />
</Canvas>

### Hover Delay

If you set `openDelay`, `closeDelay`, `hoverEnterDelay` and `hoverLeaveDelay` props to 500ms at the same time, the popup layer will show or hide after 1s.

<Canvas mdxSource={require("!!raw-loader!./HoverDelay").default}>
  <Story id="examples-popup--hover-delay" />
</Canvas>

### Placements

<Canvas mdxSource={require("!!raw-loader!./Placements").default}>
  <Story id="examples-popup--placements" />
</Canvas>

### Right Click

<Canvas mdxSource={require("!!raw-loader!./RightClick").default}>
  <Story id="examples-popup--right-click" />
</Canvas>

### Hover Move

<Canvas mdxSource={require("!!raw-loader!./HoverMove").default}>
  <Story id="examples-popup--hover-move" />
</Canvas>

### Inline Trigger

<Canvas mdxSource={require("!!raw-loader!./InlineTrigger").default}>
  <Story id="examples-popup--inline-trigger" />
</Canvas>

### Text Selection

<Canvas mdxSource={require("!!raw-loader!./TextSelection").default}>
  <Story id="examples-popup--text-selection" />
</Canvas>

### Nested Popup

<Canvas mdxSource={require("!!raw-loader!./NestedPopup").default}>
  <Story id="examples-popup--nested-popup" />
</Canvas>

## API

| Property          | Type                                                                                                                                                                                       | Description                                                                                                                                                                                                                                                                                                |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `children`        | `string` \| `number` \| `ReactElement` \| [`() => PopperVirtualElement`](#poppervirtualelement)                                                                                            | Trigger element, it should be string, number, a react element (must reference to a DOM element) or a function returns a virtual element.                                                                                                                                                                   |
| `content`         | `ReactNode`                                                                                                                                                                                | Popup content.                                                                                                                                                                                                                                                                                             |
| `arrowed`         | `boolean`                                                                                                                                                                                  | Show arrow.                                                                                                                                                                                                                                                                                                |
| `animeless`       | `boolean`                                                                                                                                                                                  | Disable animation.                                                                                                                                                                                                                                                                                         |
| `unpadding`       | `boolean`                                                                                                                                                                                  | Remove content padding style.                                                                                                                                                                                                                                                                              |
| `on`              | `"click"` \| `"hover"` \| `"focus"` \| `"context-menu"` \| `string[]`                                                                                                                      | Trigger event, default is `"click"`.                                                                                                                                                                                                                                                                       |
| `off`             | `"escape"` \| `"page-hide"` \| `"window-blur"` \| `"document-click"` \| `string[]`                                                                                                         | Close event. Default is `"document-click"`.                                                                                                                                                                                                                                                                |
| `offset`          | `number` \| `[number, number]`                                                                                                                                                             | Offset distance between popup layer and trigger element. If a number is set, it will only effect the main axis. If an array is set, the first one effects main axis, and the second one effects cross axis.                                                                                                |
| `strategy`        | `"absolute"` \| `"fixed"`                                                                                                                                                                  | Popup strategy, default is `"absolute"`.                                                                                                                                                                                                                                                                   |
| `placement`       | `"top"` \| `"top-start"` \| `"top-end"` \| `"right"` \| `"right-start"` \| `"right-end"` \| `"bottom"` \| `"bottom-start"` \| `"bottom-end"` \| `"left"` \| `"left-start"` \| `"left-end"` | Popup placement, default is `"bottom"`.                                                                                                                                                                                                                                                                    |
| `container`       | [`EffectTarget<HTMLElement>`](https://lilibraries.github.io/utils/types#effecttarget-react)                                                                                                | The DOM node where the component should be rendered. It can be `null`, `undefined`, a DOM element, a function returns a DOM element or a ref object references a DOM element. Default is `document.body`. This prop can be configured by [`Portal.Config`](?path=/story/others-portal--page#portalconfig). |
| `open`            | `boolean`                                                                                                                                                                                  | Show popup layer.                                                                                                                                                                                                                                                                                          |
| `defaultOpen`     | `boolean`                                                                                                                                                                                  | Uncontrolled open.                                                                                                                                                                                                                                                                                         |
| `openDelay`       | `number`                                                                                                                                                                                   | Delay time on open, in milliseconds.                                                                                                                                                                                                                                                                       |
| `closeDelay`      | `number`                                                                                                                                                                                   | Delay time on close, in milliseconds.                                                                                                                                                                                                                                                                      |
| `hoverEnterDelay` | `number`                                                                                                                                                                                   | Delay time on hover enter, in milliseconds, default is `100`.                                                                                                                                                                                                                                              |
| `hoverLeaveDelay` | `number`                                                                                                                                                                                   | Delay time on hover leave, in milliseconds, default is `100`.                                                                                                                                                                                                                                              |
| `firstMount`      | `boolean`                                                                                                                                                                                  | Mount on first time, no matter whether the component is opened.                                                                                                                                                                                                                                            |
| `keepMounted`     | `boolean`                                                                                                                                                                                  | Keep mounted after the component is closed.                                                                                                                                                                                                                                                                |
| `updateDeps`      | `any[]`                                                                                                                                                                                    | A dependency array to auto update popup position.                                                                                                                                                                                                                                                          |
| `followPointer`   | `boolean`                                                                                                                                                                                  | The popup layer will follow the mouse pointer.                                                                                                                                                                                                                                                             |
| `render`          | `(popper: ReactElement) => ReactElement`                                                                                                                                                   | Custom popper render.                                                                                                                                                                                                                                                                                      |
| `onOpen`          | `() => void`                                                                                                                                                                               | Open event handler.                                                                                                                                                                                                                                                                                        |
| `onClose`         | `() => void`                                                                                                                                                                               | Close event handler.                                                                                                                                                                                                                                                                                       |
| `onOpened`        | `() => void`                                                                                                                                                                               | Opened event handler.                                                                                                                                                                                                                                                                                      |
| `onClosed`        | `() => void`                                                                                                                                                                               | Closed event handler.                                                                                                                                                                                                                                                                                      |
| `onUpdate`        | [`(data: PopperUpdateData) => void`](?path=/story/overlays-popper--page#popperupdatedata)                                                                                                  | Update event of the popup layer position changing.                                                                                                                                                                                                                                                         |

It accepts all props which the native `<div>` element supports.
